{% extends 'base.html' %}
{% load l10n %}
{% block content %}
            <div class="row">
              <div class="col-md-6">
                <div class="row">
                  <div class="col-md-6">
                    <h1>Client</h1>
                  </div>
                  <div class="col-md-3 offset-md-3">
                    <div class="dropdown pull-right">
                      <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true"></button>
                      <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="{% url 'client_edit' pk=item.pk %}"><i class="fa fa-cog"></i> Edit</a></li>
                        <li><a class="dropdown-item" href="" data-toggle="modal" data-target=".bd-delete-modal-sm-{{ item.pk|unlocalize }}"><i class="fa fa-times-circle-o"></i> Remove</a></li>
            
                      </ul>
                    </div>
                  </div>
                </div>
{% include 'delete_form.html' %}
                <div class="table-responsive">
                  <table data-toggle="table" data-classes="table">
                    <thead>
                      <tr>
                        <th>Name</th>
                        <th>Address</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>{{ item.name }}</td>
                        <td>{{ item.address|linebreaks }}</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                {% if item.description %}
                <div class="table-responsive">
                  <table data-toggle="table" data-classes="table">
                    <thead>
                      <tr>
                        <th>Description</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr><td>{{ item.description|default:'' }}</td></tr>
                    </tbody>
                  </table>
                </div>
                {% endif %}
                {% if item.notes %}
                <h2>Notes</h2>
                <div class="note">{{ item.notes|linebreaks|default:'' }}</div>
                {% endif %}
              </div>
              <div class="col-md-6">
                <div class="row">
                  <div class="col-md-9">
                    <h2>Contacts</h2>
                  </div>
                  <div class="col-md-3">
                    <a class="btn btn-block btn-lg btn-success pull-right" href="{% url 'contact_edit' %}?client={{ item.pk }}">Add <i class="fa fa-plus"></i></a></h2>
                  </div>
                </div>
                <div class="table-responsive">
                  <table data-toggle="table"> 
                    <thead>
                      <tr>
                        <th data-sortable="true">First Name</th>
                        <th data-sortable="true">Last Name</th>
                        <th>View</th>
                        <th>Edit</th>
                      </tr>
                    </thead>
                    <tbody>
                      {% for contact in contacts %}
                      <tr>
                        <td>{{ contact.first_name }}</td>
                        <td>{{ contact.last_name }}</td>
                        <td><a href="{% url 'contact' contact.pk %}"><i class="fa fa-chevron-circle-right fa-3x"></i></a></td>
                        <td><a href="{% url 'contact_edit' contact.pk %}"><i class="fa fa-cog fa-3x"></i></a></td>
                      </tr>
                      {% endfor %}
                    </tbody>
                  </table>
                </div>
                <div class="row">
                  <div class="col-md-9">
                    <h2>Projects</h2>
                  </div>
                  <div class="col-md-3">
                    <a class="btn btn-block btn-lg btn-success pull-right" href="{% url 'project_edit' %}?client={{ item.pk }}">Add <i class="fa fa-plus"></i></a></h2>
                  </div>
                </div>
                <div class="table-responsive">
                  <table data-toggle="table"> 
                    <thead>
                      <tr>
                        <th data-sortable="true">Name</th>
                        <th data-field="start-date" data-sort-name="hidden-start-date" data-sortable="true">Start</th>
                        <th data-field="hidden-start-date" data-sortable="true" data-visible="false">Hidden Start Date</th>
                        <th data-field="end-date" data-sort-name="hidden-end-date" data-sortable="true">Stop</th>
                        <th data-field="hidden-end-date" data-sortable="true" data-visible="false">Hidden End Date</th>
                        <th>Edit</th>
                      </tr>
                    </thead>
                    <tbody> 
                    {% for project in projects %}
                    <tr>
                      <td><a href="{% url 'project' project.pk %}">{{ project.name }}</a></td>
                      <td>{{ project.start_date|date:'Y-m-d'|default:'' }}</td>
                      <td>{{ project.start_date|date:'U' }}</td>
                      <td>{{ project.end_date|date:'Y-m-d'|default:'' }}</td>
                      <td>{{ project.end_date|date:'U' }}</td>
                      <td><a href="{% url 'project_edit' project.pk %}"><i class="fa fa-cog fa-3x"></i></a></td>
                    </tr>
                    {% endfor %} 
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
{% endblock %}
